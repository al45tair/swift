RUN: %remote-run -n --remote-dir /xyz-REMOTE --output-prefix %/t some_user@some_host:12345 cp %/t/nested/input %/t/nested/output 2>&1 >/dev/null | %FileCheck %s

CHECK: /usr/bin/ssh -p 12345 some_user@some_host -- '/usr/bin/tar' '-x' '-j' '-P' '-C' '/' '-f' '-'
CHECK: /usr/bin/ssh -n -p 12345 some_user@some_host -- '/usr/bin/env' {{.*}} 'cp'
CHECK-NEXT: {{^}}/bin/mkdir -p {{.+}}/nested
CHECK-NEXT: /usr/bin/sftp
CHECK-SAME: -P 12345
CHECK-SAME: some_user@some_host
CHECK-DAG: -get '/xyz-REMOTE/output/nested/output' '{{.+}}/nested/output'
CHECK-DAG: -get '/xyz-REMOTE/output/nested/input' '{{.+}}/nested/input'
